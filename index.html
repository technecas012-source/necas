<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NECAS Online Store</title>
<style>
:root{--gold:#d4af37;--navy:#0f172a;--bg:#f8f5f0;--text:#0f172a}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif}
body{background:var(--bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column}
header{background:var(--navy);color:white;padding:15px 0;position:fixed;width:100%;top:0;z-index:1000;border-bottom:5px solid var(--gold)}
.container{max-width:1400px;margin:auto;padding:0 15px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}
.logo{font-size:2rem;font-weight:bold;display:flex;align-items:center;gap:10px}
.logo i{font-size:2.8rem;animation:pulse 3s infinite}
nav{display:flex;gap:15px;align-items:center}
nav div{color:white;padding:10px 16px;border-radius:8px;cursor:pointer;transition:.3s;position:relative}
nav div:hover{background:rgba(255,255,255,.2)}
.badge{position:absolute;top:-8px;right:-8px;background:var(--gold);color:var(--navy);width:22px;height:22px;border-radius:50%;font-size:0.9rem;display:flex;align-items:center;justify-content:center}
.main{margin-top:90px;padding:20px;flex:1}
h1{text-align:center;color:var(--gold);font-size:2.6rem;margin:20px 0}
.products{display:grid;grid-template-columns:repeat(auto-fill,minmax(230px,1fr));gap:20px}
.card{background:white;border:3px solid var(--gold);border-radius:16px;overflow:hidden;box-shadow:0 8px 25px rgba(0,0,0,.15);transition:.3s;cursor:pointer;text-align:center}
.card:hover{transform:translateY(-12px)}
.card img{width:100%;height:190px;object-fit:cover;transition:0.3s;cursor:zoom-in}
.card h3{margin:10px 0;font-size:1.2rem;font-weight:bold}
.price{font-size:1.2rem;color:var(--gold);font-weight:bold}
.btn{background:var(--navy);color:white;padding:14px 30px;border:3px solid var(--gold);border-radius:50px;cursor:pointer;margin:10px;display:inline-block;transition:.3s;font-size:1rem}
.btn:hover{background:var(--gold);color:var(--navy)}
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.9);z-index:9999;align-items:center;justify-content:center;padding:20px}
.modal-content{background:white;border:5px solid var(--gold);border-radius:20px;max-width:600px;width:95%;padding:30px;text-align:center;position:relative}
.close{position:absolute;top:10px;right:20px;font-size:2.8rem;cursor:pointer;color:var(--navy)}
#loader{position:fixed;inset:0;background:var(--navy);color:var(--gold);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:99999;font-size:3rem}
#loader i{font-size:8rem;margin-bottom:20px;animation:pulse 2s infinite}
.hidden{display:none}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.6}}
#preview{margin:10px 0;max-width:100%;max-height:200px;border:2px solid var(--gold);border-radius:12px}
input,textarea{width:100%;padding:12px;margin:8px 0;border:2px solid var(--gold);border-radius:8px;font-size:1rem}
.cart-item{display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:2px solid var(--gold);margin-bottom:10px}
.remove-btn{background:#ff4444;color:white;border:none;padding:8px 15px;border-radius:5px;cursor:pointer}
.nav-toggle{display:none;font-size:2rem;cursor:pointer}
@media(max-width:768px){
    nav{display:none;flex-direction:column;background:var(--navy);width:100%;position:absolute;top:60px;left:0;padding:10px}
    nav div{padding:12px;text-align:center}
    .nav-toggle{display:block;color:white;position:absolute;top:15px;right:15px}
}
</style>
</head>
<body>
<div id="loader"><i>âŒ›</i> Loading...</div>
<header>
<div class="container">
<div class="logo"><i>ðŸ›’</i> NECAS</div>
<div class="nav-toggle" onclick="toggleNav()">â˜°</div>
<nav id="navMenu">
<div onclick="showPage('home')">Home</div>
<div onclick="showPage('cart')">Cart <span class="badge" id="cartCount">0</span></div>
<div onclick="showLogin()">Login</div>
<div onclick="showPage('admin')">Admin</div>
</nav>
</div>
</header><main class="main" id="home">
<h1>NECAS Products</h1>
<div class="products" id="productList"></div>
</main><main class="main hidden" id="cart">
<h1>Cart</h1>
<div id="cartItems"></div>
<div id="totalAmount" style="margin:20px;font-weight:bold;font-size:1.2rem"></div>
<button class="btn" onclick="sendWhatsAppOrder()">Send Order via WhatsApp</button>
<button class="btn" onclick="clearCart()" style="background:#ff4444;border-color:#ff4444">Clear Cart</button>
</main><main class="main hidden" id="admin">
<h1>Admin Panel</h1>
<div style="margin-bottom:20px;max-width:500px;margin:0 auto 30px">
<input id="pName" placeholder="Product Name">
<input id="pPrice" type="number" placeholder="Price">
<textarea id="pDesc" placeholder="Description" rows="3"></textarea>
<input type="file" id="pImage" accept="image/*" onchange="previewImage(event)">
<img id="preview" src="" alt="Image Preview" class="hidden">
<button class="btn" onclick="addProduct()">Add Product</button>
</div>
<div class="products" id="adminList"></div>
</main><div id="loginModal" class="modal">
<div class="modal-content">
<span class="close" onclick="closeModal()">&times;</span>
<h2>Login</h2>
<input id="email" placeholder="Email" value="">
<input id="pass" type="password" placeholder="Password" value="">
<button class="btn" onclick="login()">Login</button>
</div>
</div><div id="productModal" class="modal">
<div class="modal-content">
<span class="close" onclick="closeModal()">&times;</span>
<img id="mImg" src="" alt="" style="width:100%;border-radius:12px;margin-bottom:15px">
<h3 id="mTitle"></h3>
<div class="price" id="mPrice"></div>
<p id="mDesc"></p>
<button class="btn" onclick="addToCart()">Add to Cart</button>
</div>
</div><script>
// --- LOCAL STORAGE BASED APP ---
let products = JSON.parse(localStorage.getItem('necas_products') || '[]');
let cart = JSON.parse(localStorage.getItem('necas_cart') || '[]');
let currentProduct = null;

// Preload 12 demo products if empty
if (!products.length){
    for(let i=1;i<=12;i++){
        products.push({
            id:i,
            title:'Product '+i,
            price:1000*i,
            desc:'Description for product '+i,
            img:'https://via.placeholder.com/300x200/0f172a/d4af37?text=Product+'+i
        });
    }
    localStorage.setItem('necas_products', JSON.stringify(products));
}

// --- INIT ---
window.onload = () => {
    document.getElementById('loader').style.display='none';
    renderProducts();
    renderCart();
};

// --- NAV ---
function toggleNav(){
    const nav = document.getElementById('navMenu');
    nav.style.display = nav.style.display==='flex'?'none':'flex';
}

// --- PRODUCTS ---
function renderProducts(){
    const list = document.getElementById('productList');
    list.innerHTML='';
    products.forEach(p=>{
        let div = document.createElement('div');
        div.className='card';
        div.innerHTML=`<img src="${p.img}" alt="${p.title}"><h3>${p.title}</h3><div class="price">MK ${p.price.toLocaleString()}</div>`;
        div.onclick = ()=>openProduct(p);
        list.appendChild(div);
    });
}

// --- PRODUCT MODAL ---
function openProduct(p){
    currentProduct=p;
    document.getElementById('mImg').src=p.img;
    document.getElementById('mTitle').textContent=p.title;
    document.getElementById('mPrice').textContent='MK '+p.price.toLocaleString();
    document.getElementById('mDesc').textContent=p.desc;
    document.getElementById('productModal').style.display='flex';
}
function closeModal(){document.querySelectorAll('.modal').forEach(m=>m.style.display='none');}

// --- CART ---
function addToCart(){
    if(!currentProduct) return;
    cart.push(currentProduct);
    localStorage.setItem('necas_cart', JSON.stringify(cart));
    renderCart();
    closeModal();
    alert('Added to cart!');
}

function renderCart(){
    const c = document.getElementById('cartItems');
    const cartCount = document.getElementById('cartCount');
    if(!cart.length){c.innerHTML='<p style="text-align:center;padding:60px;font-size:1.2rem">Cart empty</p>';}
    else{
        c.innerHTML=cart.map((item,index)=>`<div class="cart-item"><div><b>${item.title}</b><br>MK ${item.price.toLocaleString()}</div><button class="remove-btn" onclick="removeFromCart(${index})">Remove</button></div>`).join('');
    }
    cartCount.textContent = cart.length;
    const total = cart.reduce((t,i)=>t+i.price,0);
    document.getElementById('totalAmount').textContent='Total: MK '+total.toLocaleString();
}
function removeFromCart(i){cart.splice(i,1);localStorage.setItem('necas_cart',JSON.stringify(cart));renderCart();}
function clearCart(){if(confirm('Clear all items?')){cart=[];localStorage.setItem('necas_cart','[]');renderCart();}}
function sendWhatsAppOrder(){
    if(!cart.length){alert('Cart empty');return;}
    let msg='*NECAS ORDER*%0A%0A';let total=0;
    cart.forEach((p,i)=>{msg+=`${i+1}. ${p.title} - MK ${p.price.toLocaleString()}%0A`;total+=p.price;});
    msg+=`%0A*TOTAL: MK ${total.toLocaleString()}*%0A%0AThank you!`;
    window.open('https://wa.me/265994404000?text='+msg,'_blank');
}

// --- PAGE NAV ---
function showPage(page){
    document.querySelectorAll('.main').forEach(x=>x.classList.add('hidden'));
    document.getElementById(page).classList.remove('hidden');
    if(page==='admin') renderAdminProducts();
}

// --- LOGIN ---
function showLogin(){document.getElementById('loginModal').style.display='flex';}
function login(){
    const email=document.getElementById('email').value;
    const pass=document.getElementById('pass').value;
    if(email==='admin@necas.com' && pass==='admin123'){closeModal();alert('Logged in!');showPage('admin');}
    else alert('Invalid credentials');
}

// --- ADMIN ---
function previewImage(event){
    const file = event.target.files[0];
    if(file){
        document.getElementById('preview').src=URL.createObjectURL(file);
        document.getElementById('preview').classList.remove('hidden');
    }
}
function addProduct(){
    const name=document.getElementById('pName').value.trim();
    const price=parseFloat(document.getElementById('pPrice').value);
    const desc=document.getElementById('pDesc').value.trim();
    const file=document.getElementById('pImage').files[0];
    if(!name||!price||price<=0){alert('Fill product name & valid price');return;}
    const id=products.length?products[products.length-1].id+1:1;
    let img='https://via.placeholder.com/300x200/0f172a/d4af37?text='+encodeURIComponent(name);
    if(file) img=URL.createObjectURL(file);
    products.push({id,title:name,price,desc,img});
    localStorage.setItem('necas_products',JSON.stringify(products));
    document.getElementById('pName').value='';document.getElementById('pPrice').value='';document.getElementById('pDesc').value='';document.getElementById('pImage').value='';document.getElementById('preview').classList.add('hidden');
    renderProducts();renderAdminProducts();alert('Product added!');
}
function renderAdminProducts(){
    const list=document.getElementById('adminList');
    list.innerHTML='';
    products.forEach(p=>{
        let div=document.createElement('div');div.className='card';
        div.innerHTML=`<img src="${p.img}" alt="${p.title}"><h3>${p.title}</h3><div class="price">MK ${p.price.toLocaleString()}</div><p style="padding:10px;font-size:0.9rem">${p.desc}</p><button class="remove-btn" onclick="deleteProduct(${p.id})">Delete</button>`;
        list.appendChild(div);
    });
}
function deleteProduct(id){
    if(!confirm('Delete this product?')) return;
    products=products.filter(p=>p.id!==id);
    localStorage.setItem('necas_products',JSON.stringify(products));
    renderProducts();renderAdminProducts();
}

// Close modal on outside click
window.onclick=function(e){document.querySelectorAll('.modal').forEach(m=>{if(e.target===m)m.style.display='none';});}
</script></body>
</html>
